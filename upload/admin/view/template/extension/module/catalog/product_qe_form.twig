{% if column == 'attributes' %}
<table id="qe-attributes" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left">{{ entry_attribute }}</th>
			<th class="text-left">{{ entry_text }}</th>
			<th width="1"></th>
		</tr>
	</thead>
	<tbody data-bind="foreach: attributes">
		<tr data-bind="css: {'danger': hasError}">
			<td>
				<input type="text" class="form-control attributes typeahead" placeholder="{{ text_autocomplete }}" data-bind="value: name, typeahead: { options:{ autoSelect: true }, datasets: $root.ta_dataset}, css: {'has-error': id.hasError}, tooltip: {title: id.errorMsg}" />
				<input type="hidden" data-bind="attr: {name: 'product_attribute[' + $index()  + '][attribute_id]'}, value: id" data-column="{{ column }}" />
			</td>
			<td class="multi-lang-values">
				<!-- ko foreach: values -->
				<div class="input-group">
					<span class="input-group-addon" data-bind="attr: {title: $root.languages[language_id].name}"><img data-bind="attr: {src: $root.languages[language_id].flag}" /></span>
					<textarea class="form-control input-sm" rows="2" data-bind="attr: {name: 'product_attribute[' + $parentContext.$index() + '][value][' + language_id + ']'}, value: value"></textarea>
				</div>
				<!-- /ko -->
			</td>
			<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeAttribute, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="3" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: attributes().length == 0"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_attribute }}" data-bind="click: addAttribute"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_attribute }}</span></button></td>
		</tr>
	</tfoot>
</table>
<script type="text/javascript"><!--
!function(e,t,o){var a={{ languages|json_encode() }},i={{ product_attributes|json_encode() }},n=new Bloodhound({remote:{url:"{{ typeahead }}",wildcard:"%QUERY"},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},sufficient:10});n.initialize();var s=function(e,t,o){this.id=e,this.name=t,this.flag=o},r=function(e,t){this.language_id=t,this.value=ko.observable(e),this.hasError=ko.computed(this.hasError,this)};r.prototype=new e.observable_object_methods;var u=function(e,t,o){var a=this;this.id=ko.observable(e).extend({validate:{context:a}}),this.name=ko.observable(t),this.values=ko.observableArray(ko.utils.arrayMap(o,function(e){return new r(e.value,e.language_id)})).withIndex("language_id").extend({hasError:{check:!0,context:a},applyErrors:{context:a}}),this.hasError=ko.computed(this.hasError,this)};u.prototype=new e.observable_object_methods;var h=function(){var e=this;this.languages={},t.each(a,function(t,o){e.languages[t]=new s(o.language_id,o.name,"language/"+o.code+"/"+o.code+".png")}),this.attributes=ko.observableArray(ko.utils.arrayMap(i,function(e){return new u(e.attribute_id,e.name,e.values)})).extend({hasError:{check:!0,context:e},applyErrors:{context:e}}),this.removeAttribute=function(t){e.attributes.remove(t)},this.addAttribute=function(){var o=[];t.each(e.languages,function(e,t){o.push({value:"",language_id:t.id})}),e.attributes.push(new u(null,"",o))},this.removeAll=function(){e.attributes.removeAll()},this.ta_dataset={name:"{{ column }}",limit:10,display:"value",source:n,templates:{notFound:['<div class="tt-no-suggestion">{{ text_no_records_found|addslashes() }}</div>'].join("\n"),pending:['<div class="tt-no-suggestion"><i class="fa fa-spin fa-refresh"></i> {{ text_loading_records|addslashes() }}</div>'].join("\n"),suggestion:Handlebars.compile(['{% verbatim %}<p><span class="tt-nowrap">{{value}}<span class="tt-secondary-right">{{group}}</span></span></p>{% endverbatim %}'].join(""))}},this.hasError=ko.computed(this.hasError,this)};h.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new h,ko.applyBindings(e.view_models.actionQuickEditVM,t("#qe-attributes")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'seo_urls' %}
<table id="qe-seo-urls" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left">{{ entry_store }}</th>
			<th class="text-left">{{ entry_keyword }}</th>
		</tr>
	</thead>
	<tbody data-bind="foreach: { data: seo_urls, as: 'store' }">
		<tr>
			<td class="text-left" data-bind="html: $root.stores[store.store_id()].name"></td>
			<td class="text-left">
				<!-- ko foreach: store.values -->
				<div class="input-group" data-bind="css: {'has-error': hasError}">
					<span class="input-group-addon" data-bind="attr: {title: $root.languages[language_id].name}"><img data-bind="attr: {src: $root.languages[language_id].flag}" /></span>
					<input type="text" data-bind="attr: {name: 'product_seo_url[' + store.store_id() + '][' + language_id + ']'}, value: value" placeholder="{{ entry_keyword }}" class="form-control" />
				</div>
				<div class="has-error error-container" data-bind="visible: value.hasError && value.errorMsg">
					<span class="help-block error-text" data-bind="text: value.errorMsg"></span>
				</div>
				<!-- /ko -->
			</td>
		</tr>
	</tbody>
</table>
<script type="text/javascript"><!--
!function(e,o,t){var s={{ languages|json_encode() }},n={{ stores|json_encode() }},r={{ product_seo_url|json_encode() }},i=function(e,o,t){this.id=e,this.name=o,this.flag=t},a=function(e,o){this.id=e,this.name=o},h=function(e,o){this.language_id=o,this.value=ko.observable(e).extend({validate:{context:self}}),this.hasError=ko.computed(this.hasError,this)};h.prototype=new e.observable_object_methods;var d=function(e,t){var n=this;this.store_id=ko.observable(e),this.values=ko.observableArray(o.map(s,function(e,o){return t.hasOwnProperty(e.language_id)?new h(t[e.language_id],e.language_id):new h("",e.language_id)})).withIndex("language_id").extend({hasError:{check:!0,context:n},applyErrors:{context:n}}),this.hasError=ko.computed(this.hasError,this)};d.prototype=new e.observable_object_methods;var c=function(){var e=this;this.languages={},o.each(s,function(o,t){e.languages[o]=new i(t.language_id,t.name,"language/"+t.code+"/"+t.code+".png")}),this.stores={},o.each(n,function(o,t){e.stores[o]=new a(t.store_id,t.name)}),this.seo_urls=ko.observableArray(o.map(n,function(e,o){return r.hasOwnProperty(e.store_id)?new d(e.store_id,r[e.store_id]):new d(e.store_id,{})})).withIndex("store_id").extend({hasError:{check:!0,context:e},applyErrors:{context:e}}),this.hasError=ko.computed(this.hasError,this)};c.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new c,ko.applyBindings(e.view_models.actionQuickEditVM,o("#qe-seo-urls")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'discounts' %}
<table id="qe-discounts" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left">{{ entry_customer_group }}</th>
			<th class="text-right quantity">{{ entry_quantity }}</th>
			<th class="text-right priority">{{ entry_priority }}</th>
			<th class="text-right price">{{ use_gross_price ? entry_gross_price : entry_price }}</th>
			<th class="text-left">{{ entry_date_start }}</th>
			<th class="text-left">{{ entry_date_end }}</th>
			<th width="1"></th>
		</tr>
	</thead>
	<tbody data-bind="foreach: discounts">
		<tr data-bind="css: {'danger': hasError}">
			<td class="text-left">
				<input type="hidden" data-bind="attr: {name: 'product_discount[' + $index() + '][discount_id]'}, value: discount_id" />
				<select class="form-control" data-bind="attr: {name: 'product_discount[' + $index()  + '][customer_group_id]'}, value: customer_group_id">
					{% for customer_group in customer_groups %}
					<option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
					{% endfor %}
				</select>
			</td>
			<td class="text-right"><input type="text" class="form-control text-right quantity" data-bind="attr: {name: 'product_discount[' + $index() + '][quantity]'}, value: quantity" /></td>
			<td class="text-right"><input type="text" class="form-control text-right priority" data-bind="attr: {name: 'product_discount[' + $index() + '][priority]'}, value: priority" /></td>
			<td class="text-right"><input type="text" class="form-control text-right price" data-bind="attr: {name: 'product_discount[' + $index() + '][price]'}, value: price" /></td>
			<td class="text-left">
				<div class="input-group date" data-bind="datetimepicker: { pickTime: false }">
					<input type="text" class="form-control" data-date-format="YYYY-MM-DD" data-bind="attr: {name: 'product_discount[' + $index() + '][date_start]'}, value: date_start, css: {'has-error': date_start.hasError}, tooltip: {title: date_start.errorMsg}" data-container="body" />
					<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
				</div>
			</td>
			<td class="text-left">
				<div class="input-group date" data-bind="datetimepicker: { pickTime: false }">
					<input type="text" class="form-control" data-date-format="YYYY-MM-DD" data-bind="attr: {name: 'product_discount[' + $index() + '][date_end]'}, value: date_end, css: {'has-error': date_end.hasError}, tooltip: {title: date_end.errorMsg}" />
					<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
				</div>
			</td>
			<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeDiscount, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="7" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: discounts().length == 0"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_discount }}" data-bind="click: addDiscount"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_discount }}</span></button></td>
		</tr>
	</tfoot>
</table>
<script type="text/javascript"><!--
!function(e,t,o){var i={{ product_discounts|json_encode() }},r=function(t,o,i,r,s,n,a){var d=this;this.discount_id=ko.observable(t),this.customer_group_id=ko.observable(o),this.quantity=ko.observable(i).extend({numeric:{precision:0,context:d}}),this.priority=ko.observable(r).extend({numeric:{precision:0,context:d}}),this.price=ko.observable(s).extend({numeric:{precision:4,force:!1,context:d}}),this.date_start=ko.observable(n).extend({validate:{context:d,method:e.validate_datetime,message:"{{ error_date|addslashes() }}",format:"YYYY-MM-DD"}}),this.date_end=ko.observable(a).extend({validate:{context:d,method:e.validate_datetime,message:"{{ error_date|addslashes() }}",format:"YYYY-MM-DD"}}),this.hasError=ko.computed(this.hasError,this)};r.prototype=new e.observable_object_methods;var s=function(){var e=this;e.discounts=ko.observableArray(ko.utils.arrayMap(i,function(e){return new r(e.product_discount_id,e.customer_group_id,e.quantity,e.priority,e.price,"0000-00-00"==e.date_start?"":e.date_start,"0000-00-00"==e.date_end?"":e.date_end)})).extend({applyErrors:{context:e}}),e.removeDiscount=function(t){e.discounts.remove(t)},e.addDiscount=function(){e.discounts.push(new r(null,null,0,0,"0.0000","",""))},e.removeAll=function(){e.discounts.removeAll()},this.hasError=ko.computed(this.hasError,this)};s.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new s,ko.applyBindings(e.view_models.actionQuickEditVM,t("#qe-discounts")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'specials' %}
	<table id="qe-specials" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left">{{ entry_customer_group }}</th>
			<th class="text-right priority">{{ entry_priority }}</th>
			<th class="text-right price">{{ use_gross_price ? entry_gross_price : entry_price }}</th>
			<th class="text-left">{{ entry_date_start }}</th>
			<th class="text-left">{{ entry_date_end }}</th>
			<th width="1"></th>
		</tr>
	</thead>
	<tbody data-bind="foreach: specials">
		<tr data-bind="css: {'danger': hasError}">
			<td class="text-left">
				<input type="hidden" data-bind="attr: {name: 'product_special[' + $index() + '][special_id]'}, value: special_id" />
				<select class="form-control" data-bind="attr: {name: 'product_special[' + $index()  + '][customer_group_id]'}, value: customer_group_id">
					{% for customer_group in customer_groups %}
					<option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
					{% endfor %}
				</select>
			</td>
			<td class="text-right"><input type="text" class="form-control text-right priority" data-bind="attr: {name: 'product_special[' + $index() + '][priority]'}, value: priority" /></td>
			<td class="text-right"><input type="text" class="form-control text-right price" data-bind="attr: {name: 'product_special[' + $index() + '][price]'}, value: price" /></td>
			<td class="text-left">
				<div class="input-group date" data-bind="datetimepicker: { pickTime: false }">
					<input type="text" class="form-control" data-date-format="YYYY-MM-DD" data-bind="attr: {name: 'product_special[' + $index() + '][date_start]'}, value: date_start, css: {'has-error': date_start.hasError}, tooltip: {title: date_start.errorMsg}" data-container="body" />
					<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
				</div>
			</td>
			<td class="text-left">
				<div class="input-group date" data-bind="datetimepicker: { pickTime: false }">
					<input type="text" class="form-control" data-date-format="YYYY-MM-DD" data-bind="attr: {name: 'product_special[' + $index() + '][date_end]'}, value: date_end, css: {'has-error': date_end.hasError}, tooltip: {title: date_end.errorMsg}" />
					<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
				</div>
			</td>
			<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeSpecial, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="6" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: specials().length == 0"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_special }}" data-bind="click: addSpecial"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_special }}</span></button></td>
		</tr>
	</tfoot>
</table>
<script type="text/javascript"><!--
!function(e,t,o){var r={{ product_specials|json_encode() }},i=function(t,o,r,i,s,a){var d=this;this.special_id=ko.observable(t),this.customer_group_id=ko.observable(o),this.priority=ko.observable(r).extend({numeric:{precision:0,context:d}}),this.price=ko.observable(i).extend({numeric:{precision:4,force:!1,context:d}}),this.date_start=ko.observable(s).extend({validate:{context:d,method:e.validate_datetime,message:"{{ error_date|addslashes() }}",format:"YYYY-MM-DD"}}),this.date_end=ko.observable(a).extend({validate:{context:d,method:e.validate_datetime,message:"{{ error_date|addslashes() }}",format:"YYYY-MM-DD"}}),this.hasError=ko.computed(this.hasError,this)};i.prototype=new e.observable_object_methods;var s=function(){var e=this;e.specials=ko.observableArray(ko.utils.arrayMap(r,function(e){return new i(e.product_special_id,e.customer_group_id,e.priority,e.price,"0000-00-00"==e.date_start?"":e.date_start,"0000-00-00"==e.date_end?"":e.date_end)})).extend({applyErrors:{context:e}}),e.removeSpecial=function(t){e.specials.remove(t)},e.addSpecial=function(){e.specials.push(new i(null,null,0,"0.0000","",""))},e.removeAll=function(){e.specials.removeAll()},e.hasError=ko.computed(this.hasError,this)};s.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new s,ko.applyBindings(e.view_models.actionQuickEditVM,t("#qe-specials")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'filters' %}
	<div class="row" id="qe-filters">
	<div class="col-xs-12">
		<select name="product_filter[]" multiple="multiple" size="12" class="form-control">
		{% for fg in filters %}
		<optgroup label="{{ fg.name|addslashes() }}">
		{% for f in fg.filters %}
			<option value="{{ f.filter_id }}"{{ f.filter_id in product_filters ? ' selected' : '' }}>{{ f.name }}</option>
		{% endfor %}
		</optgroup>
		{% endfor %}
		</select>
	</div>
</div>
<script type="text/javascript"><!--
!function(e,t){t(function(){t("#qe-filters select").select2({placeholder:"{{ text_select_filter|addslashes() }}",allowClear:!0,formatSelection:function(e){var l=t(e.element).parent();return l&&l.is("optgroup")&&l.attr("label")?l.attr("label")+" &gt; "+e.text:e.text}})})}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'recurrings' %}
<table id="qe-recurrings" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left">{{ entry_recurring }}</th>
			<th class="text-left">{{ entry_customer_group }}</th>
			<th width="1"></th>
		</tr>
	</thead>
	<tbody data-bind="foreach: recurrings">
		<tr data-bind="css: {'danger': hasError}">
			<td class="text-left">
				<select class="form-control" data-bind="attr: {name: 'product_recurring[' + $index()  + '][recurring_id]'}, value: recurring_id, css: {'has-error': recurring_id.hasError}, tooltip: {title: recurring_id.errorMsg}">
					{% for recurring in recurrings %}
					<option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
					{% endfor %}
				</select>
			</td>
			<td class="text-left">
				<select class="form-control" data-bind="attr: {name: 'product_recurring[' + $index()  + '][customer_group_id]'}, value: customer_group_id">
					{% for customer_group in customer_groups %}
					<option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
					{% endfor %}
				</select>
			</td>
			<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeRecurring, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="3" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: recurrings().length == 0"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_recurring }}" data-bind="click: addRecurring"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_recurring }}</span></button></td>
		</tr>
	</tfoot>
</table>
<script type="text/javascript"><!--
!function(r,e){var o={{ product_recurrings|json_encode() }},i=function(r,e){var o=this;this.recurring_id=ko.observable(r).extend({validate:{context:o}}),this.customer_group_id=ko.observable(e),this.hasError=ko.computed(this.hasError,this)};i.prototype=new r.observable_object_methods;var n=function(){var r=this;r.recurrings=ko.observableArray(ko.utils.arrayMap(o,function(r){return new i(r.recurring_id,r.customer_group_id)})).extend({applyErrors:{context:r}}),r.removeRecurring=function(e){r.recurrings.remove(e)},r.addRecurring=function(){r.recurrings.push(new i(null,null))},r.removeAll=function(){r.recurrings.removeAll()},r.hasError=ko.computed(this.hasError,this)};n.prototype=new r.observable_object_methods,r.view_models.actionQuickEditVM=new n,ko.applyBindings(r.view_models.actionQuickEditVM,e("#qe-recurrings")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'related' %}
<div class="row" id="qe-related">
	<div class="col-xs-12">
		<!-- ko foreach: related -->
		<input type="hidden" name="product_related[]" data-bind="value: $data" />
		<!-- /ko -->
		<input type="hidden" id="rp-input" class="form-control" value="{{ product_related|keys|join(',') }}">
	</div>
</div>
<script type="text/javascript"><!--
!function(e,t,n){e.view_models.actionQuickEditVM=new function(){var e=this;e.related=ko.observableArray(ko.utils.arrayMap({{ product_related|keys|json_encode() }},function(e){return e.toString()})),e.removeRelated=function(t){e.related.remove(t)},e.addRelated=function(t){e.related.push(t)}},ko.applyBindings(e.view_models.actionQuickEditVM,t("#qe-related")[0]),t(function(){var e={{ product_related|json_encode() }};t("#rp-input").select2({placeholder:"{{ text_autocomplete|addslashes() }}",allowClear:!0,minimumInputLength:1,multiple:!0,formatResult:function(e,n,o){return e.model?t("<span/>").append(t("<strong/>").html(e.text),t("<small/>",{style:"padding-left:25px;",class:"text-muted"}).html(e.model)):e.text},initSelection:function(n,o){var d=[];t(n.val().split(",")).each(function(t,n){d.push({id:n,text:e.hasOwnProperty(n)?e[n].name:n})}),o(d)},ajax:{type:"GET",url:"{{ filter }}",dataType:"json",cache:!1,quietMillis:150,data:function(e,t){return{query:e,type:"product",user_token:"{{ user_token }}"}},results:function(e,n){var o=[];return t.each(e,function(e,t){ {{ product_id }}!=t.id&&o.push({id:t.id,text:t.value,model:t.model})}),{results:o}}}}),t("body").off("change","#rp-input").on("change","#rp-input",function(e){var t=ko.contextFor(this).$root;t&&(e.added?t.addRelated(e.added.id):e.removed&&t.removeRelated(e.removed.id))})})}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'descriptions' %}
<div class="row" id="qe-descriptions">
	<div class="col-xs-12">
		<ul class="nav nav-tabs">
			<!-- ko foreach: descriptions -->
			<li data-bind="css: {active: language_id() == $root.default_language}"><a data-bind="attr: {href: '#lang-' + language_id()}" data-toggle="tab"><img data-bind="attr: {src: $root.languages[language_id()].flag, title: $root.languages[language_id()].name}" /> <!-- ko text: $root.languages[language_id()].name --><!--/ko--> <!-- ko if: hasError --> <i class="fa fa-exclamation-circle text-danger"></i><!-- /ko --></a></li>
			<!-- /ko -->
 		</ul>
		<div class="tab-content">
			<!-- ko foreach: descriptions -->
			<div class="tab-pane" data-bind="attr: {id: 'lang-' + language_id()}, css: {active: language_id() == $root.default_language}">
				<div class="form-group">
					<label data-bind="attr: {for: 'description' + language_id()}" class="control-label">{{ entry_description }}</label>
					<textarea data-bind="summernote: {height: 300}, attr: {name: 'product_description[' + language_id() + '][description]', id: 'description' + language_id()}, value: description" class="form-control" rows="5"></textarea>
				</div>
				<div class="form-group required" data-bind="css: {'has-error': meta_title.hasError}">
					<label data-bind="attr: {for: 'meta_title' + language_id()}" class="control-label">{{ entry_meta_title }}</label>
					<input type="text" data-bind="attr: {name: 'product_description[' + language_id() + '][meta_title]', id: 'meta_title' + language_id()}, value: meta_title" class="form-control" />
					<div class="error-container" data-bind="visible: meta_title.hasError && meta_title.errorMsg">
						<span class="help-block error-text" data-bind="text: meta_title.errorMsg"></span>
					</div>
				</div>
				<div class="form-group">
					<label data-bind="attr: {for: 'meta_description' + language_id()}" class="control-label">{{ entry_meta_description }}</label>
					<textarea data-bind="attr: {name: 'product_description[' + language_id() + '][meta_description]', id: 'meta_description' + language_id()}, value: meta_description" class="form-control" rows="3"></textarea>
				</div>
				<div class="form-group">
					<label data-bind="attr: {for: 'meta_keyword' + language_id()}" class="control-label">{{ entry_meta_keyword }}</label>
					<textarea data-bind="attr: {name: 'product_description[' + language_id() + '][meta_keyword]', id: 'meta_keyword' + language_id()}, value: meta_keyword" class="form-control" rows="3"></textarea>
				</div>
			</div>
			<!-- /ko -->
		</div>
	</div>
</div>
<script type="text/javascript"><!--
!function(e,t,a){var i={{ languages|json_encode() }},r={{ product_description|json_encode() }};e.texts=t.extend({},e.texts,{error_meta_title:"{{ error_meta_title|addslashes() }}"});var n=function(e){var t=this.min_length!=a?this.min_length:0,i=this.max_length!=a?this.max_length:255;e.length<t||e.length>i?(this.target.hasError(!0),this.target.errorMsg(this.message)):(this.target.hasError(!1),this.target.errorMsg(""))},o=function(e,t,a){this.id=e,this.name=t,this.flag=a},s=function(t,a,i,r,o){var s=this;this.language_id=ko.observable(t),this.description=ko.observable(a),this.meta_title=ko.observable(i).extend({validate:{method:n,min_length:3,max_length:255,message:e.texts.error_meta_title,context:s}}),this.meta_description=ko.observable(r),this.meta_keyword=ko.observable(o),this.hasError=ko.computed(this.hasError,this)};s.prototype=new e.observable_object_methods;var h=function(){var e=this;this.languages={},t.each(i,function(t,a){e.languages[a.language_id]=new o(a.language_id,a.name,"language/"+a.code+"/"+a.code+".png")}),this.default_language="{{ default_language }}",this.descriptions=ko.observableArray(t.map(i,function(e){return r.hasOwnProperty(e.language_id)?new s(e.language_id,r[e.language_id].hasOwnProperty("description")?r[e.language_id].description:"",r[e.language_id].hasOwnProperty("meta_title")?r[e.language_id].meta_title:"",r[e.language_id].hasOwnProperty("meta_description")?r[e.language_id].meta_description:"",r[e.language_id].hasOwnProperty("meta_keyword")?r[e.language_id].meta_keyword:""):new s(e.language_id,"","","","")})).withIndex("language_id").extend({hasError:{check:!0,context:e},applyErrors:{context:e}}),this.hasError=ko.computed(this.hasError,this)};h.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new h,ko.applyBindings(e.view_models.actionQuickEditVM,t("#qe-descriptions")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'images' %}
<table id="qe-images" cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
	<thead>
		<tr>
			<th class="text-left" width="1">{{ entry_image }}</th>
			<th class="text-right">{{ entry_sort_order }}</th>
			<th width="1"></th>
		</tr>
	</thead>
	<tbody data-bind="foreach: images">
		<tr>
			<td class="text-left">
				<a href="#" data-toggle="im" class="img-thumbnail img-relative" data-bind="attr: {id: 'ai-thumb-' + $index()}">
					<div class="content-overlay">
						<span class="fa fa-4x fa-refresh fa-spin"></span>
					</div>
					<img data-bind="attr: {src: thumb}">
				</a>
				<input type="hidden" data-bind="attr: {name: 'product_image[' + $index()  + '][image]', id: 'ai-image-' + $index()}, value: image" />
			</td>
			<td class="text-vertical-middle"><input type="text" class="form-control text-right sort-order pull-right" data-bind="attr: {name: 'product_image[' + $index() + '][sort_order]'}, value: sort_order" /></td>
			<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeImage, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="3" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: images().length == 0"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_image }}" data-bind="click: addImage"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_image }}</span></button></td>
		</tr>
	</tfoot>
</table>
<input type="hidden" value="" id="ai-new-image" />
<script type="text/javascript"><!--
!function(e,o){var a={{ product_images|json_encode() }},i="{{ no_image }}",n=function(e,o,a){this.image=ko.observable(e),this.thumb=ko.observable(o),this.sort_order=ko.observable(a),this.hasError=ko.computed(this.hasError,this)};n.prototype=new e.observable_object_methods;var t=function(){var e=this;e.images=ko.observableArray(ko.utils.arrayMap(a,function(e){return new n(e.image,e.thumb,e.sort_order)})).extend({hasError:{check:!0,context:e},applyErrors:{context:e}}),e.addImage=function(){e.images.push(new n("",i,0))},e.removeImage=function(o){e.images.remove(o)},e.removeAll=function(){e.images.removeAll()},e.clearImage=function(e){var o=e.$data;o.image(""),o.thumb(i)},e.browseImage=function(e){var a="ai-new-image",i="",n=o.Deferred();return o("#"+a).val(""),o.ajax({url:"index.php?route=common/filemanager&user_token={{ user_token }}&target="+encodeURIComponent(a),dataType:"html"}).done(function(n){o("#modal-image").append(n),o("#modal-image").modal("show"),o("#modal-image").on("hide.bs.modal",function(){var n=o("#ai-thumb-"+e.$index()+" .content-overlay");o("#"+a).val()&&(i=o("#"+a).val(),o.ajax({url:"index.php?route=extension/module/admin_quick_edit/image&user_token={{ user_token }}&image="+encodeURIComponent(i)+"&width={{ additional_image_width }}&height={{ additional_image_height }}",dataType:"text",beforeSend:function(){n&&n.addClass("in")}}).done(function(o){e.$data.image(i),e.$data.thumb(o)}).always(function(){n&&n.removeClass("in")})),o("#modal-image").off("hide.bs.modal")}).on("hidden.bs.modal",function(){o("#modal-image").empty(),o("#modal-image").off("hidden.bs.modal")})}).always(function(){n.resolve()}),n.promise()},this.hasError=ko.computed(this.hasError,this)};t.prototype=new e.observable_object_methods,e.view_models.actionQuickEditVM=new t,ko.applyBindings(e.view_models.actionQuickEditVM,o("#qe-images")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% elseif column == 'options' %}
	<div id="qe-options" class="form-horizontal">
	<div class="row">
		<div class="col-xs-4 col-sm-4 col-md-3">
			<ul class="nav nav-pills nav-stacked">
				<!-- ko foreach: options -->
				<li data-bind="attr: {class: $index() == 0 ? 'active' : ''}"><a data-bind="attr: {href: '#tab-option-' + $index()}" data-toggle="tab"><button type="button" data-toggle="tooltip" class="btn btn-xs btn-link remove-option" data-bind="click: $parent.removeOption, tooltip: {}" title="{{ button_remove }}"><i class="fa fa-minus-circle"></i></button> <!-- ko text: name --><!-- /ko --></a></li>
				<!-- /ko -->
				<li><input type="text" class="form-control options typeahead" placeholder="{{ text_autocomplete }}" data-bind="typeahead: { options:{ autoSelect: true }, datasets: $root.ta_dataset}"></li>
			</ul>
		</div>
		<div class="col-xs-8 col-sm-8 col-md-9">
			<div class="tab-content">
				<!-- ko foreach: options -->
				<div data-bind="attr: {id: 'tab-option-' + $index(), class: $index() == 0 ? 'tab-pane active' : 'tab-pane'}">
					<input type="hidden" data-bind="attr: {name: 'product_option[' + $index()  + '][product_option_id]'}, value: product_option_id" />
					<input type="hidden" data-bind="attr: {name: 'product_option[' + $index()  + '][option_id]'}, value: option_id" />
					<input type="hidden" data-bind="attr: {name: 'product_option[' + $index()  + '][name]'}, value: name" />
					<input type="hidden" data-bind="attr: {name: 'product_option[' + $index()  + '][type]'}, value: type" />
					<div class="form-group">
						<label data-bind="attr: {for: 'input-required-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_required }}</label>
						<div class="col-sm-4 col-md-3">
							<select data-bind="attr: {id: 'input-required-' + $index(), name: 'product_option[' + $index()  + '][required]'}, value: required" class="form-control">
								<option value="1">{{ text_yes }}</option>
								<option value="0">{{ text_no }}</option>
							</select>
						</div>
					</div>
					<!-- ko if: type() == "text" -->
					<div class="form-group">
						<label data-bind="attr: {for: 'input-option-value-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_option_value }}</label>
						<div class="col-sm-9 col-lg-10">
							<input type="text" data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value" class="form-control">
						</div>
					</div>
					<!-- /ko -->
					<!-- ko if: type() == "textarea" -->
					<div class="form-group">
						<label data-bind="attr: {for: 'input-option-value-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_option_value }}</label>
						<div class="col-sm-9 col-lg-10">
							<textarea data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value" class="form-control" rows="5"></textarea>
						</div>
					</div>
					<!-- /ko -->
					<!-- ko if: type() == "file" -->
					<input type="hidden" data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value">
					<!-- /ko -->
					<!-- ko if: type() == "date" -->
					<div class="form-group">
						<label data-bind="attr: {for: 'input-option-value-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_option_value }}</label>
						<div class="col-sm-6 col-md-5">
							<div class="input-group date" data-bind="datetimepicker: { pickTime: false }">
								<input type="text" data-date-format="YYYY-MM-DD" data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value" class="form-control">
								<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
							</div>
						</div>
					</div>
					<!-- /ko -->
					<!-- ko if: type() == "time" -->
					<div class="form-group">
						<label data-bind="attr: {for: 'input-option-value-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_option_value }}</label>
						<div class="col-sm-6 col-md-5">
							<div class="input-group time" data-bind="datetimepicker: { pickTime: true, pickDate: false }">
								<input type="text" data-date-format="HH:mm" data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value" class="form-control">
								<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
							</div>
						</div>
					</div>
					<!-- /ko -->
					<!-- ko if: type() == "datetime" -->
					<div class="form-group">
						<label data-bind="attr: {for: 'input-option-value-' + $index()}" class="col-sm-3 col-lg-2 control-label">{{ entry_option_value }}</label>
						<div class="col-sm-8 col-md-6">
							<div class="input-group datetime" data-bind="datetimepicker: { pickTime: true }">
								<input type="text" data-date-format="YYYY-MM-DD HH:mm" data-bind="attr: {id: 'input-option-value-' + $index(), name: 'product_option[' + $index()  + '][value]'}, value: value" class="form-control">
								<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
							</div>
						</div>
					</div>
					<!-- /ko -->
					<!-- ko if: $.inArray(type(), ['select', 'radio', 'checkbox', 'image']) != -1 -->
					<div class="table-responsive">
						<table cellpadding="0" cellspacing="0" border="0" class="table table-condensed{{ module_product_quick_edit_row_hover_highlighting ? ' table-hover' : '' }}{{ module_product_quick_edit_alternate_row_colour ? ' table-striped' : '' }} qe">
							<thead>
								<tr>
									<th class="text-left option_value">{{ entry_option_value }}</th>
									<th class="text-right quantity">{{ entry_quantity }}</th>
									<th class="text-left subtract">{{ entry_subtract }}</th>
									<th class="text-right price">{{ use_gross_price ? entry_gross_price : entry_price }}</th>
									<th class="text-right points">{{ entry_option_points }}</th>
									<th class="text-right weight">{{ entry_weight }}</th>
									<th width="1"></th>
								</tr>
							</thead>
							<tbody data-bind="foreach: product_option_value">
								<tr>
									<td class="text-vertical-middle text-left">
										<select data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][option_value_id]'}, options: $root.option_values[$parent.option_id()], optionsValue: 'option_value_id', optionsText: 'name', value: option_value_id" class="form-control option_value">
											<option data-bind="value: option_value_id, text: name"></option>
										</select>
										<input type="hidden" data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][product_option_value_id]'}, value: product_option_value_id" /></td>
									</td>
									<td class="text-vertical-middle text-right"><input type="text" class="form-control text-right quantity" data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][quantity]'}, value: quantity" /></td>
									<td class="text-vertical-middle text-left">
										<select data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][subtract]'}, value: subtract" class="form-control subtract">
											<option value="1">{{ text_yes }}</option>
											<option value="0">{{ text_no }}</option>
										</select>
									</td>
									<td class="text-right">
										<select data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][price_prefix]'}, value: price_prefix" class="form-control prefix price">
											<option value="+">{{ text_plus }}</option>
											<option value="-">{{ text_minus }}</option>
										</select>
										<input type="text" class="form-control text-right price" data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][price]'}, value: price" />
									</td>
									<td class="text-right">
										<select data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][points_prefix]'}, value: points_prefix" class="form-control prefix points">
											<option value="+">{{ text_plus }}</option>
											<option value="-">{{ text_minus }}</option>
										</select>
										<input type="text" class="form-control text-right points" data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][points]'}, value: points" />
									</td>
									<td class="text-right">
										<select data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][weight_prefix]'}, value: weight_prefix" class="form-control prefix weight">
											<option value="+">{{ text_plus }}</option>
											<option value="-">{{ text_minus }}</option>
										</select>
										<input type="text" class="form-control text-right weight" data-bind="attr: {name: 'product_option[' + $parentContext.$index() + '][product_option_value][' + $index() + '][weight]'}, value: weight" />
									</td>
									<td class="text-vertical-middle"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove }}" data-bind="click: $parent.removeOptionValue, tooltip: {}"><i class="fa fa-minus-circle"></i> <span class="visible-lg-inline">{{ button_remove }}</span></button></td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan="7" class="text-right"><button type="button" class="btn btn-danger" data-toggle="tooltip" title="{{ button_remove_all }}" data-bind="click: removeAll, disable: product_option_value().length == 0, tooltip: {}"><i class="fa fa-trash-o"></i> <span class="visible-lg-inline">{{ button_remove_all }}</span></button> <button type="button" class="btn btn-success" data-toggle="tooltip" title="{{ button_add_option }}" data-bind="click: addOptionValue, tooltip: {}"><i class="fa fa-plus-circle"></i> <span class="visible-lg-inline">{{ button_add_option }}</span></button></td>
								</tr>
							</tfoot>
						</table>
					</div>
					<!-- /ko -->
				</div>
				<!-- /ko -->
			</div>
		</div>
	</div>
</div>
<script type="text/javascript"><!--
!function(o,e,t){var i={{ product_options|json_encode() }},s={{ option_values|json_encode() }},r=new Bloodhound({remote:{url:"{{ typeahead }}",wildcard:"%QUERY"},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(o){return o.id},sufficient:10});r.initialize();var n=function(o,e,t,i,s,r,n,a,p,l){this.product_option_value_id=ko.observable(o),this.option_value_id=ko.observable(e),this.quantity=ko.observable(t),this.subtract=ko.observable(i),this.price=ko.observable(s),this.price_prefix=ko.observable(r),this.points=ko.observable(n),this.points_prefix=ko.observable(a),this.weight=ko.observable(p),this.weight_prefix=ko.observable(l),this.hasError=ko.computed(this.hasError,this)};n.prototype=new o.observable_object_methods;var a=function(o,e,i,s,r,a,p){var l=this;this.product_option_id=ko.observable(o),this.option_id=ko.observable(e),this.name=ko.observable(i),this.type=ko.observable(s),this.required=ko.observable(a),this.product_option_value=ko.observableArray(ko.utils.arrayMap(p,function(o){return new n(o.product_option_value_id,o.option_value_id,o.quantity,o.subtract,o.price,o.price_prefix,o.points,o.points_prefix,o.weight,o.weight_prefix)})).extend({hasError:{check:!0,context:l},applyErrors:{context:l}}),r=r==t?"":r,this.value=ko.observable(r),this.removeOptionValue=function(o){l.product_option_value.remove(o)},this.addOptionValue=function(){l.product_option_value.push(new n(null,"",0,0,"0.0000","+",0,"+","0.0000","+"))},this.removeAll=function(){l.product_option_value.removeAll()},this.hasError=ko.computed(this.hasError,this)};a.prototype=new o.observable_object_methods;var p=function(){var o=this;o.options=ko.observableArray(ko.utils.arrayMap(i,function(o){return new a(o.product_option_id,o.option_id,o.name,o.type,o.value,o.required,o.product_option_value)})).extend({hasError:{check:!0,context:o},applyErrors:{context:o}}),o.option_values=s,o.removeOption=function(e){o.options.remove(e)},o.addOption=function(e){e.option_value.length&&!o.option_values.hasOwnProperty(e.id)&&(o.option_values[e.id]=e.option_value),o.options.push(new a("",e.id,e.value,e.type,"",0,[]))},this.ta_dataset={name:"{{ column }}",limit:10,display:"value",source:r,templates:{notFound:['<div class="tt-no-suggestion">{{ text_no_records_found|addslashes() }}</div>'].join("\n"),pending:['<div class="tt-no-suggestion"><i class="fa fa-spin fa-refresh"></i> {{ text_loading_records|addslashes() }}</div>'].join("\n"),suggestion:Handlebars.compile(['{% verbatim %}<p><span class="tt-nowrap">{{value}}<span class="tt-secondary-right">{{category}}</span></span></p>{% endverbatim %}'].join(""))}},this.hasError=ko.computed(this.hasError,this)};p.prototype=new o.observable_object_methods,o.view_models.actionQuickEditVM=new p,ko.applyBindings(o.view_models.actionQuickEditVM,e("#qe-options")[0])}(window.bull5i=window.bull5i||{},jQuery);
//--></script>
{% endif %}
