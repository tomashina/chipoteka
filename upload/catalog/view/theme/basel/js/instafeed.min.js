/*!
 * jquery.instagramFeed
 *
 * @version 1.3.2
 *
 * @author Javier Sanahuja Liebana <bannss1@gmail.com>
 * @contributor csanahuja <csanahuja10@gmail.com>
 *
 * https://github.com/jsanahuja/jquery.instagramFeed
 *
 */
!function(e){var a={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640,lazy_load:!1,on_error:console.error},i={150:0,240:1,320:2,480:3,640:4};e.instagramFeed=function(t){var r=e.fn.extend({},a,t);if(""==r.username&&""==r.tag)return r.on_error("Instagram Feed: Error, no username nor tag defined.",1),!1;if(void 0!==r.get_data&&console.warn("Instagram Feed: options.get_data is deprecated, options.callback is always called if defined"),null==r.callback&&""==r.container)return r.on_error("Instagram Feed: Error, neither container found nor callback defined.",2),!1;var n=""==r.username,o=n?r.host+"explore/tags/"+r.tag+"/":r.host+r.username+"/";return e.get(o,function(a){try{a=a.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return void r.on_error("Instagram Feed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26",3)}if(void 0!==(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage)){if(a=a[0].graphql.user||a[0].graphql.hashtag,""!=r.container){var t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};r.styling&&(t.profile_container=" style='text-align:center;'",t.profile_image=" style=''",t.profile_name=" style='font-size:1.2em;'",t.profile_biography=" style='font-size:1em;'",t.gallery_image=" style='margin:"+r.margin+"px "+r.margin+"px;'");var o="",s=void 0!==i[r.image_size]?i[r.image_size]:i[640];if(r.display_gallery)if(void 0!==a.is_private&&!0===a.is_private)o+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var l=(a.edge_owner_to_timeline_media||a.edge_hashtag_to_media).edges;_=l.length>r.items?r.items:l.length;for(var g=0;g<_;g++){var d,m="https://www.instagram.com/p/"+l[g].node.shortcode;switch(l[g].node.__typename){case"GraphSidecar":"sidecar",d=l[g].node.thumbnail_resources[s].src;break;case"GraphVideo":"video",d=l[g].node.thumbnail_src;break;default:"image",d=l[g].node.thumbnail_resources[s].src}void 0!==l[g].node.edge_media_to_caption.edges[0]&&void 0!==l[g].node.edge_media_to_caption.edges[0].node&&void 0!==l[g].node.edge_media_to_caption.edges[0].node.text&&null!==l[g].node.edge_media_to_caption.edges[0].node.text?l[g].node.edge_media_to_caption.edges[0].node.text:void 0!==l[g].node.accessibility_caption&&null!==l[g].node.accessibility_caption?l[g].node.accessibility_caption:(n?a.name:a.username)+" image "+g,o+="<a href='"+m+"' class='item insta-item' style='padding:"+r.margin/2+"px;' target='_blank'>",o+="<div style='position:absolute;background-position:center center;background-size:cover;background-image:url("+d+");top:"+r.margin/2+"px;left:"+r.margin/2+"px;bottom:"+r.margin/2+"px;right:"+r.margin/2+"px' /></div>",o+="<img src='catalog/view/theme/basel/image/insta-filler.png' />",o+="<span class='hover_fill' style='top:"+r.margin/2+"px;left:"+r.margin/2+"px;bottom:"+r.margin/2+"px;right:"+r.margin/2+"px' /></span>",o+="</a>",o+="</div>",o+="</a>"}}if(r.display_igtv&&void 0!==a.edge_felix_video_timeline){var c=a.edge_felix_video_timeline.edges,_=c.length>r.items?r.items:c.length;if(c.length>0){o+="<div class='instagram_igtv'>";for(g=0;g<_;g++)o+="<a href='https://www.instagram.com/p/"+c[g].node.shortcode+"' rel='noopener' target='_blank'>",o+="<img"+(r.lazy_load?" loading='lazy'":"")+" src='"+c[g].node.thumbnail_src+"' alt='"+r.username+" instagram image "+g+"'"+t.gallery_image+" />",o+="</a>";o+="</div>"}}e(r.container).html(o)}null!=r.callback&&r.callback(a)}else r.on_error("Instagram Feed: It looks like YOUR network has been temporary banned because of too many requests. See https://github.com/jsanahuja/jquery.instagramFeed/issues/25",4)}).fail(function(e){r.on_error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: "+e.status,5)}),!0}}(jQuery);
